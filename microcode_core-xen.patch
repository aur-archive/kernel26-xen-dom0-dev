--- linux-2.6.31-xen-r4/arch/x86/kernel/microcode_core-xen.c.orig      
2009-10-15 20:22:24.000000000 +0400
+++ linux-2.6.31-xen-r4/arch/x86/kernel/microcode_core-xen.c    2009-10-15
20:24:04.000000000 +0400
@@ -34,6 +34,7 @@
 #include <linux/firmware.h>
 #include <linux/uaccess.h>
 #include <linux/vmalloc.h>
+#include <linux/swap.h>

 #include <asm/microcode.h>
 #include <asm/processor.h>
